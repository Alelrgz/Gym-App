{% extends "base.html" %}

{% block content %}
<!-- Top Section Container -->
<div class="p-4 pb-0">
    <!-- Header Row -->
    <div class="flex justify-between items-start mb-6">
        <div>
            <p class="text-xs text-white/60 uppercase tracking-wider">Trainer Dashboard</p>
            <h2 class="text-2xl font-bold" id="trainer-name">Coach <span id="trainer-username">Loading...</span></h2>
            <!-- Trainer ID is now determined by JWT auth -->
            <select id="trainer-selector"
                class="hidden mt-2 bg-white/10 text-white text-xs px-3 py-2 rounded border border-white/20 focus:border-white/40 outline-none">
                <option value="trainer_default">Default Trainer</option>
                <option value="trainer_A">Trainer A</option>
                <option value="trainer_B">Trainer B</option>
                <option value="trainer_C">Trainer C</option>
            </select>
        </div>
        <!-- Notification Bell -->
        <div class="flex space-x-2">
            <div data-action="showModal" data-target="notification-modal"
                class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center tap-effect cursor-pointer">
                üîî
            </div>
            <div data-action="showModal" data-target="profile-modal"
                class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center tap-effect cursor-pointer">
                ‚öôÔ∏è
            </div>
        </div>
    </div>


    <!-- Stats Row -->
    <div class="flex space-x-4 mb-4">
        <div class="flex-1 bg-black/20 p-3 rounded-2xl backdrop-blur-sm">
            <p class="text-2xl font-bold" id="active-clients-count">24</p>
            <p class="text-[10px] text-white/60 uppercase">Active</p>
        </div>
        <div class="flex-1 bg-red-500/20 p-3 rounded-2xl backdrop-blur-sm border border-red-500/20">
            <p class="text-2xl font-bold text-red-400" id="at-risk-clients-count">3</p>
            <p class="text-[10px] text-red-300/60 uppercase">At Risk</p>
        </div>
    </div>

    <!-- Quick Notes Card -->
    <div class="glass-card p-3 rounded-2xl">
        <div class="flex justify-between items-center mb-2">
            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider ml-1">Quick Notes</h3>
            <span class="text-[10px] text-green-400 opacity-0 transition-opacity duration-500"
                id="notes-saved-indicator">Saved</span>
        </div>
        <textarea id="trainer-notes"
            class="w-full bg-black/20 text-white text-sm rounded-xl p-3 border border-white/5 focus:border-white/20 outline-none resize-none h-24 placeholder-white/20 transition"
            placeholder="Write your thoughts, reminders, or todolist here..."></textarea>
    </div>
</div>

<!-- Main Content -->
<div class="flex-1 p-4 space-y-6 pt-6">
    <!-- Client Roster Section -->
    <div>
        <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider ml-1 mb-3">Client Roster</h3>

        <!-- Search Bar -->
        <input type="text" id="client-search" placeholder="Search clients..."
            class="w-full bg-black/20 border border-white/10 rounded-xl px-3 py-2 mb-3 text-xs text-white outline-none focus:border-primary/50 transition">

        <div class="relative group">
            <!-- Top Shadow (Hidden by default, shown on scroll) -->
            <div id="client-list-top-shadow"
                class="absolute top-0 left-0 right-0 h-6 bg-gradient-to-b from-gray-900 to-transparent z-10 pointer-events-none opacity-0 transition-opacity duration-300">
            </div>

            <div id="client-list" class="space-y-3 max-h-96 overflow-y-auto pr-1 pb-4"></div>

            <!-- Bottom Shadow -->
            <div
                class="absolute bottom-0 left-0 right-0 h-10 bg-gradient-to-t from-gray-900 via-gray-900/80 to-transparent z-10 pointer-events-none">
            </div>
        </div>
    </div>

    <!-- Workouts Section -->
    <div>
        <div class="flex justify-between items-center mb-3">
            <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider ml-1">Workouts</h3>
            <button data-action="openCreateWorkout"
                class="text-xs bg-white/10 px-2 py-1 rounded hover:bg-white/20 transition">+ Create
                Workout</button>
        </div>
        <div id="workout-library" class="space-y-2"></div>
    </div>

    <!-- Weekly Splits Section -->
    <div>
        <div class="flex justify-between items-center mb-3">
            <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider ml-1">Weekly Splits</h3>
            <button data-action="openCreateSplit"
                class="text-xs bg-white/10 px-2 py-1 rounded hover:bg-white/20 transition">+ Create
                Split</button>
        </div>
        <div id="split-library" class="space-y-2"></div>
    </div>



    <!-- Exercise Library Section -->
    <div>
        <button id="toggle-exercises-btn"
            class="w-full py-2 text-sm bg-red-600 text-white font-bold rounded-xl mb-4 hover:bg-red-700 transition shadow-lg shadow-red-600/20">
            Edit Exercises
        </button>

        <div id="exercises-section" class="hidden transition-all duration-300 ease-in-out">
            <div class="flex justify-between items-center mb-3">
                <h3 class="text-sm font-bold text-gray-400 uppercase tracking-wider ml-1">Exercises List
                </h3>
                <button data-action="showModal" data-target="create-exercise-modal"
                    class="text-xs bg-white/10 px-2 py-1 rounded hover:bg-white/20 transition">+ New
                    Exercise</button>
            </div>

            <!-- Search and Filters -->
            <div class="glass-card p-2 mb-2 flex flex-col gap-2">
                <div class="relative">
                    <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-xs">üîç</span>
                    <input type="text" id="main-ex-search" placeholder="Search exercises..."
                        class="w-full bg-black/20 border border-white/10 rounded-xl pl-8 pr-3 py-2 text-xs text-white outline-none focus:border-primary/50 transition placeholder-gray-500">
                </div>
                <div class="flex gap-2">
                    <select id="main-ex-filter-muscle"
                        class="w-1/2 bg-black/20 border border-white/10 rounded-xl px-3 py-2 text-xs text-white outline-none focus:border-primary/50 transition appearance-none cursor-pointer hover:bg-white/5">
                        <option value="">All Muscles</option>
                        <option value="Chest">Chest</option>
                        <option value="Back">Back</option>
                        <option value="Legs">Legs</option>
                        <option value="Shoulders">Shoulders</option>
                        <option value="Arms">Arms</option>
                        <option value="Abs">Abs</option>
                        <option value="Cardio">Cardio</option>
                    </select>
                    <select id="main-ex-filter-type"
                        class="w-1/2 bg-black/20 border border-white/10 rounded-xl px-3 py-2 text-xs text-white outline-none focus:border-primary/50 transition appearance-none cursor-pointer hover:bg-white/5">
                        <option value="">All Types</option>
                        <option value="Compound">Compound</option>
                        <option value="Isolation">Isolation</option>
                        <option value="Bodyweight">Bodyweight</option>
                        <option value="Cardio">Cardio</option>
                    </select>
                </div>
            </div>

            <div id="main-exercise-library" class="grid grid-cols-1 gap-2 max-h-96 overflow-y-auto pr-1">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>
</div>

{% endblock %}